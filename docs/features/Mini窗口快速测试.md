# Mini悬浮窗快速测试指南 ⚡

## 🎯 **1分钟快速测试**

### **步骤 1：进入Mini模式**
1. 应用启动后，点击右上角 **`➖`** 按钮
2. 窗口应该缩小为300×300的黑色悬浮窗
3. 显示 **`[*] 所有规则`** 和 **`滚轮切换`** 提示

✅ **预期结果**：窗口变小，显示Mini界面

---

### **步骤 2：测试滚轮切换**
1. 在Mini窗口上 **向下滚动鼠标滚轮**
2. 规则应该切换为 **`[A] 图片文件归类`**
3. 继续向下滚动，切换到 **`[B] 文档文件归类`**
4. 向上滚动，返回到 **`[A]`** 然后 **`[*]`**

✅ **预期结果**：每次滚动切换一个规则，显示 `规则已切换` 提示

---

### **步骤 3：测试右键菜单**
1. 在Mini窗口上 **右键点击**
2. 应该弹出白色菜单，列出所有规则
3. 当前规则旁边有 **`✓`** 标记
4. 点击其他规则（例如 **`[B] 文档文件归类`**）
5. Mini窗口显示更新为 **`[B] 文档文件归类`**

✅ **预期结果**：菜单正常显示，点击可切换规则

---

### **步骤 4：测试文件拖拽**

#### 准备测试文件：
- 创建 `test.jpg`
- 创建 `test.docx`

#### 测试流程：
1. 滚轮切换到 **`[A] 图片文件归类`**
2. 拖拽 **`test.jpg`** 到Mini窗口
3. 观察：
   - 窗口变为黑色 + 白色边框
   - 显示 **`处理中... (1 个)`**
   - 然后显示 **`✓ 已整理 1 个`**
   - 文件移动到 `Pictures/` 文件夹

4. 拖拽 **`test.docx`** 到Mini窗口
5. 观察：
   - 显示 **`⚠ 未匹配规则`**（因为当前是图片规则）

6. 滚轮切换到 **`[*] 所有规则`**
7. 再次拖拽 **`test.docx`**
8. 观察：
   - 显示 **`✓ 已整理 1 个`**
   - 文件移动到 `Documents/` 文件夹

✅ **预期结果**：文件根据规则正确整理，显示对应状态

---

### **步骤 5：退出Mini模式**
1. **单击** Mini窗口任意位置
2. 窗口应该恢复为360×520的完整界面
3. 显示所有Tab和内容

✅ **预期结果**：顺利返回完整界面

---

## 🎨 **视觉检查清单**

### Mini模式外观
- [ ] 背景为深黑色（几乎不透明）
- [ ] 中间有灰度的📂图标
- [ ] 规则标签（如 `[A]`）显示为白色
- [ ] 规则名称显示为白色
- [ ] 底部提示文字为灰色

### 拖拽反馈
- [ ] 拖拽时窗口变为纯黑色
- [ ] 白色边框出现
- [ ] 状态文字更新

### 右键菜单
- [ ] 菜单为白色背景
- [ ] 有淡灰色边框和阴影
- [ ] 选中项有灰色背景
- [ ] 规则标签为黑色方块白色字母

---

## 🐛 **常见问题排查**

### 问题 1：点击Mini窗口没有退出
**可能原因**：点击到了非窗口区域  
**解决方案**：点击中间的图标或文字区域

### 问题 2：滚轮切换无反应
**可能原因**：鼠标焦点不在Mini窗口上  
**解决方案**：先点击一下Mini窗口（但不要立即松开，否则会退出），然后滚动

### 问题 3：右键菜单显示不全
**可能原因**：菜单超出屏幕边界  
**解决方案**：将Mini窗口移到屏幕中央再右键

### 问题 4：文件拖拽无反应
**检查项**：
- [ ] 后端日志是否有错误
- [ ] 控制台是否显示 `拖拽文件:` 日志
- [ ] 文件路径是否正确
- [ ] 规则是否启用

---

## ⚡ **快速调试命令**

打开浏览器开发者工具（通常是 F12），在Console中：

```javascript
// 查看当前状态
console.log('Mini模式:', appState.isMiniMode);
console.log('当前规则索引:', appState.currentRuleIndex);
console.log('规则列表:', appState.rules);

// 手动切换到Mini模式
await enterMiniMode();

// 手动退出Mini模式
await exitMiniMode();

// 手动切换规则
appState.currentRuleIndex = 0; // 切换到第一个规则
updateMiniDisplay();
```

---

## 📸 **测试截图建议**

建议截图记录以下状态：
1. 完整界面（点击➖之前）
2. Mini模式初始状态（[*] 所有规则）
3. Mini模式规则切换后（[A] 图片归类）
4. 右键菜单打开状态
5. 文件拖拽时的白色边框
6. 文件处理成功的提示

---

## ✅ **测试完成确认**

完成以下所有项目后，功能即测试通过：

- [ ] Mini模式成功进入和退出
- [ ] 滚轮切换规则正常工作
- [ ] 右键菜单正常显示和切换
- [ ] 文件拖拽成功整理（匹配规则）
- [ ] 文件拖拽正确跳过（不匹配规则）
- [ ] 视觉效果符合设计（黑色背景、白色文字、灰色图标）
- [ ] 状态提示准确（处理中、已整理、未匹配）

---

**祝测试顺利！** 🎉

如有问题，请查看 `Mini悬浮窗功能说明.md` 获取详细文档。

