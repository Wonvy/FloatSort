# FloatSort V2 快速开始指南 🚀

## 🎉 欢迎使用 FloatSort V2！

V2 版本带来了全新的界面和更强大的功能。本指南将帮助您快速上手。

---

## 📸 界面预览

### **新的 Tab 布局**
```
┌─────────────────────────────────────┐
│  FloatSort      [▶️ 启动] [⏸️ 停止]  │
├─────────────────────────────────────┤
│ 📁 文件夹 │ 📋 规则 │ 📊 活动      │
├─────────────────────────────────────┤
│                                     │
│  [Tab 内容区域]                      │
│                                     │
│                                     │
└─────────────────────────────────────┘
```

---

## 🆕 V2 主要变化

### **从 V1 升级？**
✅ **无需担心！** 您的配置会自动迁移：
- V1 的监控路径 → V2 的文件夹
- V1 的规则 → V2 的规则库
- 所有规则会自动关联到新文件夹

---

## 📖 5 分钟入门

### **步骤 1: 创建规则** 📋

1. 点击顶部 **"📋 规则"** Tab
2. 点击 **"➕ 添加规则"** 按钮
3. 填写规则信息：
   ```
   规则名称: 图片文件
   匹配类型: 文件扩展名
   匹配值: jpg, png, gif
   目标文件夹: Pictures
   ```
4. 点击 **"保存"**

**示例规则：**
- **文档归类**: `pdf, doc, docx` → `Documents`
- **视频归类**: `mp4, avi, mkv` → `Videos`
- **压缩包归类**: `zip, rar, 7z` → `Archives`

---

### **步骤 2: 添加文件夹** 📂

1. 点击顶部 **"📁 文件夹"** Tab
2. 点击 **"➕ 添加文件夹"** 按钮
3. 点击 **"浏览"** 选择要监控的文件夹
4. 文件夹名称会自动填充（可修改）
5. **重要：勾选要应用的规则**
6. 确保 **"立即启用监控"** 已勾选
7. 点击 **"保存"**

**示例配置：**
```
文件夹路径: C:\Users\你的用户名\Desktop\下载
文件夹名称: 下载文件夹
关联规则: ✅ 图片文件
          ✅ 文档归类
          ✅ 视频归类
立即启用: ✅
```

---

### **步骤 3: 启动监控** ▶️

有两种方式启动监控：

#### **方式 1: 全局启动（推荐）**
- 点击右上角的 **"▶️"** 按钮
- 会启动所有已启用的文件夹

#### **方式 2: 单独启动**
- 在文件夹卡片上切换 **Toggle 开关**
- 只启动特定文件夹

---

### **步骤 4: 查看活动** 📊

1. 点击 **"📊 活动"** Tab
2. 查看实时统计：
   - 已处理文件数
   - 监控文件夹数
   - 活动规则数
3. 查看实时日志：
   - 文件检测
   - 整理结果
   - 错误信息

---

## 🎯 核心概念

### **1. 文件夹（Folder）**
- 您要监控的目录
- 每个文件夹可以独立启用/停用
- 每个文件夹可以关联不同的规则

### **2. 规则（Rule）**
- 文件整理的逻辑
- 全局共享，可被多个文件夹使用
- 包含：匹配条件 + 目标位置

### **3. 规则关联**
- 文件夹与规则是**多对多**关系
- 一个文件夹可以使用多条规则
- 一条规则可以被多个文件夹使用

### **4. 目标文件夹**
- 相对于监控文件夹的子目录
- 会自动创建（如果不存在）
- 例如：`Pictures` → `监控文件夹/Pictures`

---

## 💡 使用技巧

### **技巧 1: 规则优先级**
- 如果文件匹配多条规则，会应用第一条
- 建议按具体程度排序：具体的规则在前，通用的在后

### **技巧 2: 文件夹独立管理**
```
桌面下载: 只用 [图片] [文档] 规则
工作项目: 只用 [代码] [文档] 规则
临时文件: 使用所有规则
```

### **技巧 3: 批量整理**
1. 停止监控
2. 添加新规则
3. 将要整理的文件放入监控文件夹
4. 启动监控 → 自动整理

### **技巧 4: 测试规则**
1. 创建一个测试文件夹
2. 关联新规则
3. 放入测试文件
4. 观察整理结果
5. 确认无误后应用到正式文件夹

---

## ⚙️ 常见操作

### **编辑文件夹**
1. 找到文件夹卡片
2. 点击 **"编辑"** 按钮
3. 修改信息
4. 保存

### **编辑规则**
1. 切换到 **"规则"** Tab
2. 找到要编辑的规则
3. 点击 **"编辑"** 按钮
4. 修改信息
5. 保存

### **停用文件夹**
- 点击文件夹卡片上的 **Toggle 开关**
- 灰色 = 停用，蓝色 = 启用

### **删除文件夹/规则**
- 点击 **"删除"** 按钮
- 确认删除
- ⚠️ **注意**: 删除规则会自动解除所有关联

---

## 🔍 故障排除

### **问题 1: 文件没有被整理**

**检查清单：**
- [ ] 文件夹监控是否启用？（Toggle 是否为蓝色）
- [ ] 全局监控是否启动？（右上角是否显示 ⏸️）
- [ ] 文件夹是否关联了规则？
- [ ] 规则匹配条件是否正确？（扩展名、文件名等）

**调试步骤：**
1. 查看 **"活动"** Tab 的日志
2. 确认文件是否被检测到
3. 查看是否有错误信息

---

### **问题 2: 找不到目标文件夹**

**原因：**
- 目标文件夹会自动创建，不需要手动创建
- 路径是相对于监控文件夹的

**示例：**
```
监控文件夹: C:\Users\你\Desktop\Downloads
目标文件夹: Pictures
实际路径: C:\Users\你\Desktop\Downloads\Pictures
```

---

### **问题 3: 配置丢失**

**配置文件位置：**
```
FloatSort/data/config.json
```

**备份建议：**
- 定期备份 `config.json` 文件
- V2 配置包含 `version: 2` 字段

---

## 📚 进阶使用

### **复杂规则示例**

#### **示例 1: 按文件大小分类**
```
规则名称: 大文件
匹配类型: 文件大小
匹配值: 100  (100MB)
目标文件夹: LargeFiles
```

#### **示例 2: 按文件名分类**
```
规则名称: 截图文件
匹配类型: 文件名包含
匹配值: screenshot
目标文件夹: Screenshots
```

#### **示例 3: 多扩展名**
```
规则名称: Office 文档
匹配类型: 文件扩展名
匹配值: doc, docx, xls, xlsx, ppt, pptx
目标文件夹: Office
```

---

### **多文件夹场景**

#### **场景 1: 桌面清理**
```
文件夹: C:\Users\你\Desktop
关联规则: [图片] [文档] [视频] [压缩包]
启用: ✅
```

#### **场景 2: 下载管理**
```
文件夹: C:\Users\你\Downloads
关联规则: [安装包] [文档] [压缩包]
启用: ✅
```

#### **场景 3: 项目整理**
```
文件夹: D:\Projects\临时文件
关联规则: [代码] [文档] [图片]
启用: ✅
```

---

## 🎨 UI 操作说明

### **卡片颜色含义**
- **白色卡片**: 已启用的文件夹
- **灰色卡片**: 已停用的文件夹
- **蓝色 Toggle**: 监控已启用
- **灰色 Toggle**: 监控已停用

### **通知类型**
- **✅ 绿色**: 成功操作
- **❌ 红色**: 错误
- **ℹ️ 蓝色**: 信息提示

### **活动日志图标**
- **📥**: 文件检测
- **✅**: 整理成功
- **⚠️**: 未匹配规则
- **❌**: 错误
- **🟢**: 启动监控
- **🔴**: 停止监控

---

## 🆘 需要帮助？

### **检查日志**
应用日志在终端中实时显示：
```
INFO floatsort: FloatSort 启动中...
INFO floatsort::config: 配置已从 "data/config.json" 加载
INFO floatsort::file_monitor: 开始监控路径: ...
```

### **重置配置**
如果遇到无法解决的问题：
1. 停止应用
2. 备份 `data/config.json`
3. 删除 `data/config.json`
4. 重新启动应用（会使用默认配置）

---

## 🎉 开始使用吧！

现在您已经掌握了 FloatSort V2 的核心功能。

**快速回顾：**
1. 创建规则 ✅
2. 添加文件夹 ✅
3. 关联规则 ✅
4. 启动监控 ✅
5. 查看活动 ✅

**祝您使用愉快！** 🚀

---

*有问题或建议？欢迎反馈！*

